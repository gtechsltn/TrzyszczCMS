@using TrzyszczCMS.Client.Data
@using TrzyszczCMS.Client.Views.Shared
@using TrzyszczCMS.Client.Services.Interfaces 
@inject IJSInteropService JSInterop

<div>
    <div class="d-flex btn-toolbar" role="toolbar" aria-label="Customise content">
        @*<div class="btn-group me-2" role="group" aria-label="Changes">
            <button class="btn btn-light"><i class="fas fa-undo" aria-label="Undo"></i></button>
            <button class="btn btn-light"><i class="fas fa-redo" aria-label="Redo"></i></button>
        </div>*@
        <div class="btn-group me-2" role="group" aria-label="Character format">
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddFormattingAsterisks(AsteriskSuffixFormat.Bold))"><i class="fas fa-bold" aria-label="Bold"></i></button>
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddFormattingAsterisks(AsteriskSuffixFormat.Italic))"><i class="fas fa-italic" aria-label="Italic"></i></button>
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddFormattingSuffixes(Constants.MarkDown.STRIKETHROUGH_TEXT_SUFFIX))"><i class="fas fa-strikethrough" aria-label="Striked"></i></button>
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddFormattingSuffixesLeft(charSuffix: Constants.MarkDown.HEADING_SUFFIX, charSuffixRepeatability: 6))"><i class="fas fa-heading" aria-label="Heading"></i></button>
        </div>
        <div class="btn-group me-2" role="group" aria-label="Lists">
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddFormattingSuffixesLeft())"><i class="fas fa-list-ol" aria-label="Ordered list"></i></button>
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddFormattingSuffixesLeft(charSuffix: Constants.MarkDown.UNORDERED_LIST_SUFFIX))"><i class="fas fa-list-ul"aria-label="Unordered list"></i></button>
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddFormattingSuffixesLeft(stringSuffix: Constants.MarkDown.CHECKLIST_POINT_CHECKED))"><i class="fas fa-tasks" aria-label="Checklist"></i></button>
        </div>
        <div class="btn-group me-2" role="group" aria-label="Specifying text">
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddFormattingSuffixesLeft(charSuffix: Constants.MarkDown.QUOTE_BLOCK_PART))"><i class="fas fa-quote-left" aria-label="Quote"></i></button>
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddLinkBasedText(LinkBasedContentType.Hyperlink))"><i class="fas fa-link" aria-label="Hyperlink"></i></button>
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddFormattingSuffixes(Constants.MarkDown.CODE_TEXT_SUFFIX))"><i class="fas fa-code" aria-label="Preformatted code"></i></button>
        </div>
        <div class="btn-group me-2" role="group" aria-label="Table & image">
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddLinkBasedText(LinkBasedContentType.ImageSource))"><i class="fas fa-image" aria-label="Image"></i></button>
            <button class="btn btn-light" disabled="@EditorButtonsDisabled" @onclick="@(() => AddLinkBasedText(LinkBasedContentType.Table))"><i class="fas fa-table" aria-label="Table"></i></button>
        </div>
        <div class="btn-group me-2" role="group" aria-label="Preview">
            <button class="btn btn-light" @onclick="@ToggleView"><i class="fas fa-eye" aria-label="Toggle view"></i></button>
        </div>
    </div>

    <div class="container-fluid pt-2 g-0">
        <div class="row g-0">
            <div class="@CssClassesForEditor" style="height: calc(100vh - 160px);" aria-label="Content editor">
                <textarea id="txarMarkDownEditedText" class="form-control h-100" value="@markDownCode" @oninput="@OnInputChanged"
                          style="font-family: Consolas, monospace; resize: none;"/>
            </div>
            <div class="@CssClassesForPreview overflow-auto" style="height: calc(100vh - 160px);" aria-label="Preview of changes">
                <MarkDown Text="@markDownCode" />
            </div>
        </div>
    </div>
</div>
